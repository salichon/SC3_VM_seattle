.TH "WSIRIS" "1" "January 21, 2014" "2014.016" "SeisComP3"
.SH NAME
wsiris \- SeisComP3 Documentation
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.\" Man page generated from reStructeredText.
.
.sp
\fBProvide IRIS webservices.\fP
.SH DESCRIPTION
.sp
wsiris is a server that provides IRIS Web services from a SeisComP3 database
and an SDS waveform archive. The following services are implemented:
.TS
center;
|l|l|l|.
_
T{
Service
T}	T{
Retrieves this...
T}	T{
In this format
T}
_
T{
\fI\%ws-event\fP
T}	T{
contributed earthquake origin and magnitude estimates
T}	T{
\fI\%QuakeML\fP, \fI\%SC3ML\fP
T}
_
T{
\fI\%ws-station\fP
T}	T{
network, station, channel, response metadata
T}	T{
\fI\%StationXML\fP, \fI\%SC3ML\fP
T}
_
T{
\fI\%ws-availability\fP
T}	T{
information about what time series data is available from the DMC
T}	T{
XML, Query parameters for ws\-bulkdataselect, ws\-dataselect, or ws\-timeseries
T}
_
T{
\fI\%ws-dataselect\fP
T}	T{
single channel of time series data in miniSEED format. Use this to pass data to other workflow services
T}	T{
\fI\%miniSEED\fP
T}
_
T{
\fI\%ws-bulkdataselect\fP
T}	T{
multiple channels of time series data
T}	T{
\fI\%miniSEED\fP
T}
_
.TE
.sp
If wsiris is started, it accepts connections by default on port 8080 which
can be changed in the configuration.
.SS Event
.INDENT 0.0
.IP \(bu 2
contributed earthquake origin and magnitude estimates
.IP \(bu 2
request type: HTTP\-GET
.IP \(bu 2
events may be filtered e.g. by hypocenter, time and magnitude, see \fI\%http://www.iris.edu/ws/event/\fP
.UNINDENT
.SS URL
.INDENT 0.0
.IP \(bu 2
\fI\%http://localhost:8080/event\fP
.IP \(bu 2
\fI\%http://localhost:8080/event/query\fP
.UNINDENT
.SS Example
.INDENT 0.0
.IP \(bu 2
\fI\%http://localhost:8080/event?starttime=2012-09-12&minlat=30&maxlat=60&minlon=-10&maxlon=30\fP
.UNINDENT
.SS Feature Notes
.INDENT 0.0
.IP \(bu 2
SeisComP does not distinguish between catalogs and contributors, but supports
agencyIDs. Hence, if specified, the value of the catalog or contributor
parameter is mapped to the agencyID. If both parameters are supplied, the
value of the contributor is used.
.IP \(bu 2
origin and magnitude filter parameters are always applied to preferred origin
resp. preferred magnitude
.IP \(bu 2
additional request parameters:
.INDENT 2.0
.IP \(bu 2
\fBoutput: [qml, qml\-rt, sc3ml]\fP, default: \fBqml\fP
.IP \(bu 2
\fBincludecomments\fP: boolean, default: \fBtrue\fP
.IP \(bu 2
\fBformatted\fP: boolean, default: \fBfalse\fP
.UNINDENT
.UNINDENT
.SS Station
.INDENT 0.0
.IP \(bu 2
network, station, channel, response metadata
.IP \(bu 2
request type: HTTP\-GET
.IP \(bu 2
stations may be filtered e.g. by geographic region and time, also the
information depth level is selectable, see \fI\%http://www.iris.edu/ws/station/\fP
.UNINDENT
.SS URL
.INDENT 0.0
.IP \(bu 2
\fI\%http://localhost:8080/station\fP
.IP \(bu 2
\fI\%http://localhost:8080/station/query\fP
.UNINDENT
.SS Example
.INDENT 0.0
.IP \(bu 2
\fI\%http://localhost:8080/station?net=GE&level=sta\fP
.UNINDENT
.SS Feature Notes
.INDENT 0.0
.IP \(bu 2
\fBupdatedafter\fP request parameter not implemented: The last modification time
in SeisComP is tracked on the object level. If a child of an object is updated
the update time is not propagated to all parents. In order to check if a
station was updated all children must be evaluated recursively. This operation
would be much to expensive.
.IP \(bu 2
additional request parameters:
.INDENT 2.0
.IP \(bu 2
\fBoutput: [stationxml, sc3ml]\fP, default: \fBstationxml\fP
.IP \(bu 2
\fBformatted\fP: boolean, default: \fBfalse\fP
.UNINDENT
.UNINDENT
.SS Availability
.INDENT 0.0
.IP \(bu 2
information about what time series data is available from the DMC
.IP \(bu 2
request type: HTTP\-GET
.IP \(bu 2
data may be filtered e.g. by geographic, time and channel information, see
\fI\%http://www.iris.edu/ws/availability/\fP
.IP \(bu 2
supports different output formats:
.INDENT 2.0
.IP \(bu 2
\fBxml\fP – StationXML like
.IP \(bu 2
\fBquery\fP – HTTP\-GET parameter list, used as input for \fIref:sec\-dataselect\fP
.IP \(bu 2
\fBbulkdataselect\fP – Lines of stream parameters, used for
\fIref:sec\-bulkdataselect\fP
.UNINDENT
.UNINDENT
.SS URL
.INDENT 0.0
.IP \(bu 2
\fI\%http://localhost:8080/availability\fP
.IP \(bu 2
\fI\%http://localhost:8080/availability/query\fP
.UNINDENT
.SS Example
.INDENT 0.0
.IP \(bu 2
\fI\%http://localhost:8080/availability?start=2010&output=query\fP
.UNINDENT
.SS Feature Notes
.INDENT 0.0
.IP \(bu 2
data availability is only based on SDS file names (not miniSEED content),
hence date precision is limited to days
.UNINDENT
.SS Data select
.INDENT 0.0
.IP \(bu 2
single channel of time series data in miniSEED format
.IP \(bu 2
request type: HTTP\-GET
.UNINDENT
.SS URL
.INDENT 0.0
.IP \(bu 2
\fI\%http://localhost:8080/dataselect\fP
.IP \(bu 2
\fI\%http://localhost:8080/dataselect/query\fP
.UNINDENT
.SS Example
.INDENT 0.0
.IP \(bu 2
\fI\%http://localhost:8080/dataselect?net=AD&sta=DLV&loc=--&cha=BHE&start=2010-11-08T00:00:00&end=2010-11-09T23:59:59\fP
.UNINDENT
.SS Feature Notes
.INDENT 0.0
.IP \(bu 2
\fBquality\fP parameter not implemented (information not available in SeisComP )
.IP \(bu 2
\fBref\fP parameter is limited to direct, no ICAB (IRIS Caching Artifact Builder) support
.UNINDENT
.SS Bulk data select
.INDENT 0.0
.IP \(bu 2
multiple channels of time series data
.IP \(bu 2
request type: HTTP\-POST
.UNINDENT
.SS URL
.INDENT 0.0
.IP \(bu 2
\fI\%http://localhost:8080/bulkdataselect\fP
.IP \(bu 2
\fI\%http://localhost:8080/bulkdataselect/query\fP
.UNINDENT
.SS Example
.sp
In the following example the command line tool \fBcurl\fP is used to first
retrieve a stream request list from the \fIref:sec\-availablity\fP service and then
to post the list to the \fIref:sec\-bulkdataselect\fP service.
.sp
.nf
.ft C
sysop@host:~$ curl \-o request.txt "http://localhost:8080/availability?start=2011&output=bulkdataselect&net=ge&sta=M*&cha=BHE"
sysop@host:~$ curl \-o data.mseed \-\-data\-urlencode selection@request.txt "http://localhost:8080/bulkdataselect"
.ft P
.fi
.SS Feature Notes
.INDENT 0.0
.IP \(bu 2
\fBquality\fP parameter not implemented (information not available in SeisComP )
.IP \(bu 2
\fBminimumlength\fP parameter is not implemented
.IP \(bu 2
\fBlongestonly\fP parameter is not implemented
.UNINDENT
.SH CONFIGURATION
.nf
\fBetc/defaults/global.cfg\fP
\fBetc/defaults/wsiris.cfg\fP
\fBetc/global.cfg\fP
\fBetc/wsiris.cfg\fP
\fB~/.seiscomp3/global.cfg\fP
\fB~/.seiscomp3/wsiris.cfg\fP
.fi
.sp
.sp
wsiris inherits \fIglobal options\fP.
.INDENT 0.0
.TP
.B listenAddress
Type: \fIIP\fP
.sp
Defines the bind address of the server. "0.0.0.0" allows
any interface to connect to this server whereas "127.0.0.0"
only allows connections from localhost.
Default is \fB0.0.0.0\fP.
.UNINDENT
.INDENT 0.0
.TP
.B port
Type: \fIint\fP
.sp
Server port to listen for incoming requests.
Default is \fB8080\fP.
.UNINDENT
.INDENT 0.0
.TP
.B sdsPath
Type: \fIstring\fP
.sp
Defines the path to the waveform archive for waveform requests.
Default is \fB@ROOTDIR@/var/lib/archive\fP.
.UNINDENT
.INDENT 0.0
.TP
.B queryObjects
Type: \fIint\fP
.sp
Maximum number of objects per query, used in ws\-station and ws\-event
services to limit main memory consumption.
Default is \fB10000\fP.
.UNINDENT
.INDENT 0.0
.TP
.B connections
Type: \fIint\fP
.sp
Number of maximum simultaneous requests.
Default is \fB5\fP.
.UNINDENT
.SH COMMAND-LINE
.SS Generic
.INDENT 0.0
.TP
.B \-h, \-\-help
show help message.
.UNINDENT
.INDENT 0.0
.TP
.B \-V, \-\-version
show version information
.UNINDENT
.INDENT 0.0
.TP
.B \-\-config\-file arg
Use alternative configuration file. When this option is used
the loading of all stages is disabled. Only the given configuration
file is parsed and used. To use another name for the configuration
create a symbolic link of the application or copy it, eg scautopick \-> scautopick2.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-plugins arg
Load given plugins.
.UNINDENT
.INDENT 0.0
.TP
.B \-D, \-\-daemon
Run as daemon. This means the application will fork itself and
doesn\(aqt need to be started with &.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-auto\-shutdown arg
Enable/disable self\-shutdown because a master module shutdown. This only
works when messaging is enabled and the master module sends a shutdown
message (enabled with \-\-start\-stop\-msg for the master module).
.UNINDENT
.INDENT 0.0
.TP
.B \-\-shutdown\-master\-module arg
Sets the name of the master\-module used for auto\-shutdown. This
is the application name of the module actually started. If symlinks
are used then it is the name of the symlinked application.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-shutdown\-master\-username arg
Sets the name of the master\-username of the messaging used for
auto\-shutdown. If "shutdown\-master\-module" is given as well this
parameter is ignored.
.UNINDENT
.SS Verbosity
.INDENT 0.0
.TP
.B \-\-verbosity arg
Verbosity level [0..4]. 0:quiet, 1:error, 2:warning, 3:info, 4:debug
.UNINDENT
.INDENT 0.0
.TP
.B \-v, \-\-v
Increase verbosity level (may be repeated, eg. \-vv)
.UNINDENT
.INDENT 0.0
.TP
.B \-q, \-\-quiet
Quiet mode: no logging output
.UNINDENT
.INDENT 0.0
.TP
.B \-\-component arg
Limits the logging to a certain component. This option can be given more than once.
.UNINDENT
.INDENT 0.0
.TP
.B \-s, \-\-syslog
Use syslog logging back end. The output usually goes to /var/lib/messages.
.UNINDENT
.INDENT 0.0
.TP
.B \-l, \-\-lockfile arg
Path to lock file.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-console arg
Send log output to stdout.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-debug
Debug mode: \-\-verbosity=4 \-\-console=1
.UNINDENT
.INDENT 0.0
.TP
.B \-\-log\-file arg
Use alternative log file.
.UNINDENT
.SS Database
.INDENT 0.0
.TP
.B \-\-db\-driver\-list
List all supported database drivers.
.UNINDENT
.INDENT 0.0
.TP
.B \-d, \-\-database arg
The database connection string, format: \fI\%service://user:pwd@host/database\fP.
"service" is the name of the database driver which can be
queried with "\-\-db\-driver\-list".
.UNINDENT
.INDENT 0.0
.TP
.B \-\-config\-module arg
The configmodule to use.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-inventory\-db arg
Load the inventory from the given database or file, format: [\fI\%service://]location\fP
.UNINDENT
.INDENT 0.0
.TP
.B \-\-db\-disable
Do not use the database at all
.UNINDENT
.SH AUTHOR
GFZ Potsdam
.SH COPYRIGHT
2014, GFZ Potsdam, gempa GmbH
.\" Generated by docutils manpage writer.
.\" 
.
